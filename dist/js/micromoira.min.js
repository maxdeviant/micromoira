angular.module("micromoira",["ngRoute"]),angular.module("micromoira").config(["$routeProvider","$locationProvider",function(t,o){"use strict";t.when("/",{controller:"HomeController",templateUrl:"partials/editor.html"}).otherwise({redirectTo:"/"})}]),angular.module("micromoira").controller("HomeController",["$scope","$timeout",function(t,o){"use strict";function e(){return++l,{label:"",image:"",text:"",exits:[]}}function n(o){o=o||e(),t.scenes.push(o),r()}function r(){o(function(){$(".collapsible").collapsible()})}function i(){var o=e();o.label="Scene 1",o.isRoot=!0,t.scenes=[o],r()}var l=0;t.addExit=function(o){if(t.canAddExit(o)){var r=e();o.exits.push(r),n(r)}},t.canAddExit=function(t){return t.exits.length<2},t.countCharacters=function(t){var o=22;return o+=t.hasOwnProperty("isRoot")&&t.isRoot?t.text.length:t.label.length+t.text.length,t.exits.length>0&&(o+=3,t.exits.forEach(function(t){o+=25+t.label.length})),o},t.countChildren=function(o){var e=0;return o.exits.forEach(function(o){o.exits.length>0&&(e+=t.countChildren(o)),e++}),e},t.compile=function(){var o=_.pick(t.scenes[0],["label","image","text","exits"]);t.story=angular.toJson(o,4),$("#story").openModal()},t.copy=function(){window.prompt("Copy your story:",t.story)},i()}]);