angular.module("micromoira",["ngRoute"]),angular.module("micromoira").config(["$routeProvider","$locationProvider",function(t,o){"use strict";t.when("/",{controller:"HomeController",templateUrl:"partials/editor.html"}).otherwise({redirectTo:"/"})}]),angular.module("micromoira").controller("HomeController",["$scope","$timeout",function(t,o){"use strict";function n(){return++c,{label:"",image:"",text:"",exits:[]}}function e(o){o=o||n(),t.scenes.push(o),r()}function r(){o(function(){$(".collapsible").collapsible()})}function i(){var o=n();o.label="Scene 1",t.scenes=[o],r()}var c=0;t.addExit=function(o){if(t.canAddExit(o)){var r=n();o.exits.push(r),e(r)}},t.canAddExit=function(t){return t.exits.length<2},t.countCharacters=function(t){var o=22;return o+=t.text.length,t.exits.length>0&&(o+=3,t.exits.forEach(function(t){o+=25+t.label.length})),o},t.countChildren=function(o){var n=0;return o.exits.forEach(function(o){o.exits.length>0&&(n+=t.countChildren(o)),n++}),n},t.compile=function(){t.story=angular.toJson(t.scenes[0],4),$("#story").openModal()},t.copy=function(){window.prompt("Copy your story:",t.story)},i()}]);